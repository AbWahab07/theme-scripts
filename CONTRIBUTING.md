# How to contribute

We ❤️ pull requests. If you'd like to fix a bug, contribute a feature or just correct a typo, please feel free to do so, as long as you follow our [Code of Conduct](https://github.com/Shopify/slate/blob/master/CODE_OF_CONDUCT.md).

If you're thinking of adding a big new feature, consider opening an issue first to discuss it to ensure it aligns to the direction of the project (and potentially save yourself some time!).

This repo is a [monorepo](https://github.com/babel/babel/blob/master/doc/design/monorepo.md) consisting of multiple packages and is managed using [Lerna](https://github.com/lerna/lerna).

## Getting Started

To start working on the codebase, first fork the repo, then clone it:

```
git clone git@github.com:your-username/theme-scripts.git
```

_Note: replace "your-username" with your GitHub handle_

Install all package dependencies and link local packages:

```
yarn bootstrap
```

Write some features. Run the tests with:

```
yarn test
```

## Documentation

If your change affects how people use the project (i.e. adding or removing
functionality, changing the return value of a function, etc),
please ensure the documentation is also updated to
reflect this.

## Changelog

The changelog is updated by the repo's maintainers since a [personal access token](https://github.com/settings/tokens) with repository access is needed to handle GitHub's API call limits.

If this is your first time generating changelog entries, add your personal access token with `public_repo` privileges to the `GITHUB_AUTH` environment variable by adding the following to your `.bashrc` file:

```
# Lerna Changelog Personal Access Token for shopify/theme-scripts repo
export GITHUB_AUTH=your_personal_access_token
```

_Note: replace "your_personal_access_token" with your GitHub personal access token_

Run the changelog generator:

```
npm run changelog
```

If nothing appears, you may not have any PRs tagged with appropriate labels in this release or you may have already published those changes. If you just released `v0.12.1` and the previous version was `v0.12.0`, run the following command to get the changes since `v0.12.0`:

```
npm run changelog -- --tag-from=v0.12.0
```

Copy the generated markdown from your terminal into [CHANGELOG.md](https://github.com/Shopify/theme-scripts/blob/master/CHANGELOG.md) and add any additional comments you wish to include. If the title of the autogenerated changelog is `Unreleased`, make sure you change it the new version name.

Commit the changes directly to `master` branch, with a commit title of:

```
Changelog vX.X.X
```

_Note: replace "X.X.X" with new repo version number_

Finally, paste the updates you made to the changelog in the release tag notes, see example: [v0.10.0 tag notes](https://github.com/Shopify/theme-scripts/releases/tag/v0.10.0).

## Publishing

1. Merge any changes you want to include in your next release into `master`.

_Note: If you are merging multiple PRs into `master` with a single PR (e.g. you are merging a working branch called v0.11.0 with multiple fixes made from multiple PRs into `master`), then **do not squash and merge this PR** because you will loose valuable details in the auto generated changelog_

2. Update the [CHANGELOG.md](https://github.com/Shopify/theme-scripts/blob/master/CHANGELOG.md) as described above

3. To select a new version number, and publish packages to NPM, run:

```
npm run publish
```

_Note: Make sure you are logged into your Shopify NPM account before publishing_
